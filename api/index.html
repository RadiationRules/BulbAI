<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Bulb A.I.</title>
<style>
:root{
  --bg:#fff8e6;--panel:#fff2c9;--panel-2:#fff0b8;--accent:#f7c948;
  --muted:#6b6b6b;--text:#1f1f1f;--glass:rgba(255,255,255,0.6);
  --success:#07a05b;--danger:#d9534f;--shadow:rgba(0,0,0,0.08);
}
[data-theme="dark"]{
  --bg:#0f0d08;--panel:#171412;--panel-2:#201b12;--accent:#e6bd00;
  --muted:#bfb6a1;--text:#efeae0;--glass:rgba(255,255,255,0.03);--shadow:rgba(0,0,0,0.6);
}
*{box-sizing:border-box;}
html,body{height:100%;margin:0;font-family:Inter,sans-serif;}
body{background:var(--bg);color:var(--text);display:flex;flex-direction:column;min-height:100vh;}
.app{display:grid;grid-template-columns:320px 1fr;gap:18px;padding:18px;flex:1;min-height:0;}
@media(max-width:820px){.app{grid-template-columns:1fr;padding:10px}.sidebar{order:2}.main{order:1}}
.sidebar{background:var(--panel);border-radius:12px;padding:12px;display:flex;flex-direction:column;gap:12px;box-shadow:0 6px 18px var(--shadow);min-width:220px;max-height:calc(100vh - 72px);overflow:auto;}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#ffd86b);display:flex;align-items:center;justify-content:center;font-weight:800;color:#2b2b2b;font-size:18px;box-shadow:0 4px 8px rgba(0,0,0,0.08);}
.brand h2{font-size:16px;margin:0;}
.sidebar-controls{display:flex;gap:8px;align-items:center;justify-content:space-between;}
.btn{background:var(--accent);border:none;padding:8px 10px;border-radius:8px;font-weight:600;cursor:pointer;}
.btn.ghost{background:transparent;border:1px solid rgba(0,0,0,0.06);}
.search{padding:8px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);background:transparent;}
.conversations{display:flex;flex-direction:column;gap:8px;overflow:auto;padding-right:4px}
.conv{display:flex;align-items:center;justify-content:space-between;padding:10px;border-radius:10px;cursor:pointer;background:linear-gradient(90deg, rgba(0,0,0,0.02), transparent);border:1px solid rgba(0,0,0,0.03);}
.conv.active{outline:3px solid rgba(247,201,72,0.18);}
.conv .title{font-weight:600}
.conv small{color:var(--muted)}
.sidebar-footer{display:flex;gap:8px;align-items:center;justify-content:space-between;padding-top:8px}

.main{display:flex;flex-direction:column;gap:12px;min-height:0}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:12px;background:var(--panel);box-shadow:0 6px 18px var(--shadow)}
.topbar .left{display:flex;gap:12px;align-items:center}
.topbar .title{font-size:18px;font-weight:700}
.controls{display:flex;gap:8px;align-items:center}

/* Dialogflow full height in main area */
df-messenger {
  flex:1;
  --df-messenger-bot-message:#fff7e0;
  --df-messenger-user-message:#fff6c6;
  --df-messenger-font-color:#1f1f1f;
  --df-messenger-send-icon:#f7c948;
}

/* Optional Dark Mode Styling */
[data-theme="dark"] df-messenger {
  --df-messenger-bot-message:#171412;
  --df-messenger-user-message:#201b12;
  --df-messenger-font-color:#efeae0;
  --df-messenger-send-icon:#e6bd00;
}

.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.35);display:none;align-items:center;justify-content:center;z-index:40}
.modal{background:var(--panel);padding:18px;border-radius:12px;min-width:320px;max-width:92%;box-shadow:0 8px 30px rgba(0,0,0,0.25)}
.modal h3{margin:0 0 8px 0}
.modal .row{display:flex;gap:8px;align-items:center;margin-top:8px}
.small{font-size:13px;color:var(--muted)}
.flex{display:flex;align-items:center;gap:8px}
.hidden{display:none}
.muted{color:var(--muted)}
.danger{color:var(--danger)}
.success{color:var(--success)}
.tiny{font-size:12px}
</style>
</head>
<body data-theme="light">
<div class="app">
<aside class="sidebar" id="sidebar">
<div class="brand"><div class="logo">B</div><div><h2>Bulb A.I.</h2><div class="small muted">Your yellow assistant</div></div></div>
<div class="sidebar-controls">
<input id="searchConv" class="search" placeholder="Search conversations..." />
<button id="newConvBtn" class="btn">+ New</button>
</div>
<div class="conversations" id="conversationsList" aria-live="polite"></div>
<div class="sidebar-footer">
<div class="flex">
<button id="exportAllBtn" class="btn ghost">Export</button>
<button id="importBtn" class="btn ghost">Import</button>
</div>
<div class="flex">
<button id="themeToggle" class="btn ghost">Dark</button>
<button id="openSettings" class="btn">Settings</button>
</div>
</div>
</aside>
<main class="main">
<div class="topbar">
<div class="left"><div class="title" id="convTitle">BulbAI</div><div class="tiny muted" id="convSubtitle">Ask me anything!</div></div>
</div>

<!-- Dialogflow as main chat -->
<df-messenger
  chat-title="BulbAI"
  agent-id="c3f3c818-72e2-4b69-bc4d-78c3f910fc11"
  language-code="en"
  chat-icon="https://link-to-your-icon.png"
  primary-color="#f7c948"
  accent-color="#ffe37f"
></df-messenger>

</main>
</div>

<div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
<div class="modal" role="dialog" aria-modal="true">
<h3>Settings & Utilities</h3>
<div class="row">
<label class="tiny muted" style="min-width:84px">Theme</label>
<select id="themeSelect" style="flex:1;padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.06)">
<option value="light">Light</option>
<option value="dark">Dark</option>
</select>
</div>
<div class="row" style="margin-top:12px;justify-content:space-between">
<div><button id="closeModal" class="btn ghost">Close</button></div>
</div>
</div>
</div>

<!-- Dialogflow script -->
<script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>

<!-- Dark/light mode toggle -->
<script>
const body = document.body;
const themeToggle = document.getElementById("themeToggle");
const themeSelect = document.getElementById("themeSelect");
themeToggle.addEventListener("click", () => {
  if(body.dataset.theme === "light"){
    body.dataset.theme = "dark";
  } else {
    body.dataset.theme = "light";
  }
});
themeSelect.addEventListener("change", e => {
  body.dataset.theme = e.target.value;
});
document.getElementById("openSettings").addEventListener("click", () => {
  document.getElementById("modalBackdrop").style.display = "flex";
});
document.getElementById("closeModal").addEventListener("click", () => {
  document.getElementById("modalBackdrop").style.display = "none";
});
</script>
</body>
</html>
