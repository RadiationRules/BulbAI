<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BulbAI</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#fff8e6;--panel:#fff2c9;--accent:#f7c948;
  --text:#1f1f1f;--muted:#6b6b6b;
}
[data-theme="dark"]{
  --bg:#0f0d08;--panel:#171412;--accent:#e6bd00;
  --text:#efeae0;--muted:#bfb6a1;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Inter',sans-serif;}
body{background:var(--bg);color:var(--text);height:100vh;display:flex;flex-direction:column;}
.hidden{display:none;}
/* Fullscreen login modal */
#loginScreen{
  position:fixed;top:0;left:0;width:100%;height:100%;
  display:flex;align-items:center;justify-content:center;
  backdrop-filter:blur(8px);background:rgba(0,0,0,0.1);z-index:50;
}
#loginCard{
  background:var(--panel);padding:30px;border-radius:16px;
  min-width:300px;max-width:400px;width:90%;box-shadow:0 8px 30px rgba(0,0,0,0.25);
  display:flex;flex-direction:column;align-items:center;gap:12px;
}
#loginCard h2{margin-bottom:10px;font-size:24px;}
#loginCard input{width:100%;padding:12px;border-radius:8px;border:1px solid #ccc;}
#loginCard button{width:100%;padding:12px;border-radius:8px;border:none;background:var(--accent);color:#2b2b2b;font-weight:600;cursor:pointer;transition:0.2s;}
#loginCard button:hover{transform:scale(1.05);}
#loginCard .googleBtn{background:#4285F4;color:white;}
#errorMsg{color:red;font-size:14px;min-height:18px;}
/* Chat Screen */
#chatScreen{flex:1;display:flex;flex-direction:column;height:100vh;}
.topbar{padding:12px;background:var(--panel);display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 20px rgba(0,0,0,0.1);}
.topbar .title{font-weight:700;font-size:20px;}
#themeToggle,#logoutBtn{padding:6px 10px;border-radius:6px;border:none;background:var(--accent);cursor:pointer;font-weight:600;margin-left:6px;transition:0.2s;}
#themeToggle:hover,#logoutBtn:hover{transform:scale(1.05);}
#messages{flex:1;padding:16px;overflow-y:auto;display:flex;flex-direction:column;gap:10px;background:var(--bg);}
.msg{max-width:70%;padding:10px 14px;border-radius:14px;opacity:0;transform:translateY(20px);animation:fadeIn 0.3s forwards;}
.msg.user{align-self:flex-end;background:linear-gradient(90deg,#ffe37f,#fff6c6);}
.msg.bot{align-self:flex-start;background:linear-gradient(90deg,#fff7e0,#fff);}
@keyframes fadeIn{to{opacity:1;transform:translateY(0);}}
.typing{align-self:flex-start;font-style:italic;color:var(--muted);}
.composer{display:flex;padding:12px;background:var(--panel);gap:8px;}
.composer textarea{flex:1;border-radius:8px;padding:10px;border:1px solid #ccc;resize:none;}
.composer button{padding:10px 14px;border-radius:8px;border:none;background:var(--accent);cursor:pointer;font-weight:600;transition:0.2s;}
.composer button:hover{transform:scale(1.05);}
</style>
</head>
<body data-theme="light">

<!-- Login Modal -->
<div id="loginScreen">
  <div id="loginCard">
    <h2>Welcome to BulbAI</h2>
    <div id="errorMsg"></div>
    <input type="email" id="email" placeholder="Email" />
    <input type="password" id="password" placeholder="Password" />
    <button id="loginBtn">Login</button>
    <button id="signupBtn">Sign Up</button>
    <button id="googleBtn" class="googleBtn">Sign in with Google</button>
  </div>
</div>

<!-- Chat Screen -->
<div id="chatScreen" class="hidden">
  <div class="topbar">
    <div class="title">💡 BulbAI</div>
    <div>
      <button id="themeToggle">🌙</button>
      <button id="logoutBtn">Logout</button>
    </div>
  </div>
  <div id="messages"></div>
  <div class="composer">
    <textarea id="inputMsg" placeholder="Type a message..."></textarea>
    <button id="sendBtn">Send</button>
  </div>
</div>

<script type="module">
// Firebase imports
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.6.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCGFij1pFUVNFP63QHxEq619c9jPnskzxY",
  authDomain: "bulbai-21f09.firebaseapp.com",
  projectId: "bulbai-21f09",
  storageBucket: "bulbai-21f09.firebasestorage.app",
  messagingSenderId: "366775652166",
  appId: "1:366775652166:web:9f0633faccbfd7db625f47",
  measurementId: "G-S7LRRREXNQ"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// DOM Elements
const loginScreen = document.getElementById('loginScreen');
const chatScreen = document.getElementById('chatScreen');
const emailInput = document.getElementById('email');
const passwordInput = document.getElementById('password');
const loginBtn = document.getElementById('loginBtn');
const signupBtn = document.getElementById('signupBtn');
const googleBtn = document.getElementById('googleBtn');
const logoutBtn = document.getElementById('logoutBtn');
const themeToggle = document.getElementById('themeToggle');
const errorMsg = document.getElementById('errorMsg');

// Auth functions
loginBtn.onclick = () => {
  const email = emailInput.value.trim(), pass = passwordInput.value.trim();
  if(!email || !pass){ errorMsg.textContent='Please enter email and password'; return; }
  signInWithEmailAndPassword(auth,email,pass).catch(err=>errorMsg.textContent=err.message);
};
signupBtn.onclick = () => {
  const email = emailInput.value.trim(), pass = passwordInput.value.trim();
  if(!email || !pass){ errorMsg.textContent='Please enter email and password'; return; }
  createUserWithEmailAndPassword(auth,email,pass).catch(err=>errorMsg.textContent=err.message);
};
googleBtn.onclick = () => {
  signInWithPopup(auth, provider).catch(err=>errorMsg.textContent=err.message);
};
logoutBtn.onclick = () => signOut(auth);

// Monitor auth state
onAuthStateChanged(auth,user=>{
  if(user){
    loginScreen.classList.add('hidden');
    chatScreen.classList.remove('hidden');
    errorMsg.textContent='';
  } else {
    loginScreen.classList.remove('hidden');
    chatScreen.classList.add('hidden');
  }
});

// Theme toggle
themeToggle.onclick = () => {
  if(document.body.getAttribute('data-theme')==='light'){
    document.body.setAttribute('data-theme','dark'); themeToggle.textContent='☀️';
  } else {
    document.body.setAttribute('data-theme','light'); themeToggle.textContent='🌙';
  }
};

// Chat functionality
const messagesDiv = document.getElementById('messages');
const inputMsg = document.getElementById('inputMsg');
const sendBtn = document.getElementById('sendBtn');

function addMessage(content,type='bot'){
  const msg = document.createElement('div');
  msg.classList.add('msg',type);
  msg.textContent = content;
  messagesDiv.appendChild(msg);
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

function showTyping(){
  const typing = document.createElement('div');
  typing.className='typing';
  typing.textContent='💡 BulbAI is thinking...';
  messagesDiv.appendChild(typing);
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
  return typing;
}

sendBtn.onclick = () => {
  const text = inputMsg.value.trim();
  if(!text) return;
  addMessage(text,'user');
  inputMsg.value='';
  const typingIndicator = showTyping();
  setTimeout(()=>{
    messagesDiv.removeChild(typingIndicator);
    addMessage('💡 BulbAI reply here (AI not set up yet)');
  },1000+Math.random()*1000);
};
</script>
</body>
</html>
