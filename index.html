<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BulbAI</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#fff8e6; --panel:#fff2c9; --accent:#f7c948; --text:#1f1f1f; --muted:#6b6b6b;
}
[data-theme="dark"]{
  --bg:#0f0d08; --panel:#171412; --accent:#e6bd00; --text:#efeae0; --muted:#bfb6a1;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);display:flex;flex-direction:column;height:100vh;overflow:hidden;}
header{padding:1rem;background:var(--panel);display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 12px rgba(0,0,0,0.05);}
header h1{display:flex;align-items:center;gap:0.5rem;font-size:1.5rem;}
header h1 span{font-weight:800;}
header button{padding:0.5rem 1rem;border:none;border-radius:8px;background:var(--accent);color:#1f1f1f;font-weight:600;cursor:pointer;transition:0.3s;}
header button:hover{transform:scale(1.05);}
main{flex:1;display:flex;flex-direction:column;justify-content:flex-end;padding:1rem;overflow-y:auto;position:relative;}
#messages{display:flex;flex-direction:column;gap:0.5rem;}
.msg{max-width:70%;padding:0.75rem 1rem;border-radius:1rem;box-shadow:0 2px 8px rgba(0,0,0,0.05);opacity:0; transform:translateY(20px);animation:fadeUp 0.5s forwards;}
.msg.user{align-self:flex-end;background:linear-gradient(90deg,#ffe37f,#fff6c6);}
.msg.bot{align-self:flex-start;background:linear-gradient(90deg,#fff7e0,#fff);}
@keyframes fadeUp{to{opacity:1;transform:translateY(0);}}
#composer{display:flex;gap:0.5rem;margin-top:0.5rem;}
#composer textarea{flex:1;padding:0.75rem;border-radius:10px;border:1px solid rgba(0,0,0,0.1);resize:none;}
#composer button{padding:0.75rem 1rem;border:none;border-radius:10px;background:var(--accent);cursor:pointer;font-weight:700;transition:0.3s;}
#composer button:hover{transform:scale(1.05);}
.login-screen{position:absolute;inset:0;background:rgba(0,0,0,0.6);display:flex;justify-content:center;align-items:center;backdrop-filter:blur(4px);}
.login-box{background:var(--panel);padding:2rem;border-radius:12px;display:flex;flex-direction:column;gap:1rem;min-width:280px;animation:fadeIn 0.5s ease forwards;}
.login-box h2{text-align:center;}
.login-box button{padding:0.75rem 1rem;border:none;border-radius:10px;cursor:pointer;font-weight:700;transition:0.3s;}
.login-box button:hover{transform:scale(1.05);}
.google-btn{background:#4285f4;color:#fff;display:flex;align-items:center;justify-content:center;gap:0.5rem;}
.google-btn img{height:20px;}
@keyframes fadeIn{from{opacity:0;transform:scale(0.95);}to{opacity:1;transform:scale(1);}}
</style>
</head>
<body data-theme="light">

<header>
  <h1>ðŸ’¡<span>BulbAI</span></h1>
  <button id="themeToggle">Dark Mode</button>
</header>

<main>
  <div id="messages"></div>
  <div id="composer">
    <textarea id="inputMsg" placeholder="Type a message..."></textarea>
    <button id="sendBtn">Send</button>
  </div>
</main>

<div class="login-screen" id="loginScreen">
  <div class="login-box">
    <h2>Welcome to BulbAI</h2>
    <button id="googleBtn" class="google-btn">
      <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg"> Sign in with Google
    </button>
    <button id="emailBtn">Sign in with Email</button>
  </div>
</div>

<script type="module">
// Firebase imports
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.1/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.6.1/firebase-auth.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyCGFij1pFUVNFP63QHxEq619c9jPnskzxY",
  authDomain: "bulbai-21f09.firebaseapp.com",
  projectId: "bulbai-21f09",
  storageBucket: "bulbai-21f09.firebasestorage.app",
  messagingSenderId: "366775652166",
  appId: "1:366775652166:web:9f0633faccbfd7db625f47",
  measurementId: "G-S7LRRREXNQ"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// DOM elements
const googleBtn = document.getElementById('googleBtn');
const loginScreen = document.getElementById('loginScreen');
const messagesDiv = document.getElementById('messages');
const inputMsg = document.getElementById('inputMsg');
const sendBtn = document.getElementById('sendBtn');
const themeToggle = document.getElementById('themeToggle');

// Google login
googleBtn.onclick = () => {
  signInWithPopup(auth, provider)
    .then(result => {
      loginScreen.style.display = 'none';
      addMessage(`ðŸ’¡ Welcome, ${result.user.displayName}!`, 'bot');
    })
    .catch(err => console.error(err.code, err.message));
};

// Keep user logged in
onAuthStateChanged(auth, user => {
  if(user) loginScreen.style.display = 'none';
});

// Chat functions
function addMessage(content,type='bot'){
  const msg = document.createElement('div');
  msg.classList.add('msg',type);
  msg.textContent = content;
  messagesDiv.appendChild(msg);
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

// Send message
sendBtn.onclick = () => {
  const text = inputMsg.value.trim();
  if(!text) return;
  addMessage(text,'user');
  inputMsg.value='';
  setTimeout(()=>{
    addMessage('ðŸ’¡ BulbAI reply here (AI not set up yet)','bot');
  },1000+Math.random()*1000);
};

// Theme toggle
themeToggle.onclick = () => {
  const body = document.body;
  if(body.dataset.theme==='light'){body.dataset.theme='dark'; themeToggle.textContent='Light Mode';}
  else{body.dataset.theme='light'; themeToggle.textContent='Dark Mode';}
};
</script>

</body>
</html>
