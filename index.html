<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BulbAI</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
<style>
/* ========================
   VARIABLES & RESET
======================== */
:root {
  --bg: #0f0f0f;
  --panel: rgba(20,20,20,0.85);
  --accent: #f7c948;
  --accent-dark: #e6bd00;
  --text: #ffffff;
  --muted: rgba(255,255,255,0.6);
  --shadow: rgba(0,0,0,0.4);
  --radius: 12px;
}
*{box-sizing:border-box;margin:0;padding:0;}
body, html{height:100%;font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);}
a{text-decoration:none;color:var(--accent);}
a:hover{text-decoration:underline;}

/* ========================
   SIGN IN SCREEN
======================== */
#loginScreen {
  display:flex;
  justify-content:center;
  align-items:center;
  height:100%;
  width:100%;
  position:relative;
  overflow:hidden;
}
#loginScreen video {
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:0;
  filter: brightness(0.25) contrast(1.2);
}
.login-container {
  background: var(--panel);
  padding:2rem;
  border-radius: var(--radius);
  box-shadow:0 8px 24px var(--shadow);
  width:100%;
  max-width:400px;
  display:flex;
  flex-direction:column;
  gap:1.5rem;
  position:relative;
  z-index:1;
  backdrop-filter: blur(6px);
  animation:fadeIn 0.5s ease forwards;
}
.login-container h1 {
  text-align:center;
  font-size:2rem;
  color:var(--accent);
}
.login-container p {
  text-align:center;
  color:var(--muted);
  font-size:0.9rem;
}
.input-group {display:flex;flex-direction:column;gap:0.5rem;}
.input-group input {
  padding:0.75rem;
  border-radius: var(--radius);
  border:1px solid rgba(255,255,255,0.2);
  background:rgba(255,255,255,0.05);
  color:var(--text);
  font-size:1rem;
}
.input-group input::placeholder {color:var(--muted);}
.button {
  padding:0.75rem;
  border-radius:var(--radius);
  border:none;
  background:var(--accent);
  color:#2b2b2b;
  font-weight:700;
  cursor:pointer;
  transition:0.3s;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:0.5rem;
}
.button:hover {transform:scale(1.03);}
.google-btn {background:#fff;border:1px solid #ddd;color:#000;}
.google-btn img {height:20px;width:20px;}
.divider {
  text-align:center;
  color:var(--muted);
  margin:0.5rem 0;
  position:relative;
}
.divider::before, .divider::after {
  content:"";
  position:absolute;
  top:50%;
  width:40%;
  height:1px;
  background:var(--shadow);
}
.divider::before {left:0;}
.divider::after {right:0;}
.try-btn {background:rgba(247,201,72,0.85);color:#2b2b2b;}

/* ========================
   ANIMATIONS
======================== */
@keyframes fadeIn {
  from {opacity:0; transform:scale(0.95);}
  to {opacity:1; transform:scale(1);}
}

/* ========================
   RESPONSIVE
======================== */
@media(max-width:500px){
  .login-container {padding:1.5rem;}
  .login-container h1 {font-size:1.75rem;}
  .input-group input {font-size:0.95rem;}
}

/* ========================
   CHAT APP
======================== */
#mainApp {display:none;flex-direction:column;height:100vh;width:100%;background:#111;}
.app {display:grid;grid-template-columns:300px 1fr;gap:12px;height:100%;padding:12px;}
.sidebar {background:#1a1a1a;padding:16px;border-radius:12px;display:flex;flex-direction:column;gap:12px;overflow:auto;}
.sidebar .brand {display:flex;align-items:center;gap:12px;}
.sidebar .brand .logo {width:40px;height:40px;background:linear-gradient(135deg,#f7c948,#ffd86b);border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:800;color:#2b2b2b;}
.sidebar button {background:#f7c948;color:#2b2b2b;border:none;padding:8px;border-radius:8px;cursor:pointer;font-weight:600;transition:0.2s;}
.sidebar button:hover{transform:scale(1.05);}
.conversations {flex:1;display:flex;flex-direction:column;gap:6px;overflow:auto;}
.conversations div{padding:6px;border-radius:8px;background:#222;cursor:pointer;transition:0.2s;}
.conversations div:hover{background:#333;}
.main {display:flex;flex-direction:column;gap:8px;}
.topbar {padding:12px;background:#1f1f1f;border-radius:12px;display:flex;align-items:center;justify-content:space-between;}
.chat-window {flex:1;background:#111;border-radius:12px;padding:12px;display:flex;flex-direction:column;gap:8px;overflow:auto;scroll-behavior:smooth;}
.msg {max-width:75%;padding:10px 14px;border-radius:12px;animation:popIn 0.25s forwards;transform:scale(0.95);opacity:0;}
.msg.user {background:linear-gradient(90deg,#ffe37f,#fff6c6);align-self:flex-end;}
.msg.bot {background:linear-gradient(90deg,#fff7e0,#fff);align-self:flex-start;}
@keyframes popIn{to{transform:scale(1);opacity:1;}}
.composer {display:flex;gap:8px;padding:12px;border-radius:12px;background:#1f1f1f;}
.composer input {flex:1;padding:10px;border-radius:8px;border:1px solid #333;background:#111;color:#fff;}
.composer button {padding:10px;border-radius:8px;background:#f7c948;border:none;color:#2b2b2b;font-weight:700;cursor:pointer;transition:0.2s;}
.composer button:hover{transform:scale(1.05);}
</style>
</head>
<body>

<!-- SIGN IN SCREEN -->
<div id="loginScreen">
  <video autoplay muted loop>
    <source src="https://cdn.videvo.net/videvo_files/video/free/2019-03/large_watermarked/190310_04_MatrixCode_1080p_preview.mp4" type="video/mp4">
  </video>

  <div class="login-container">
    <h1>ðŸ’¡ BulbAI</h1>
    <p>Sign in to continue</p>

    <button id="googleSignInBtn" class="button google-btn">
      <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" alt="Google Logo"> Sign in with Google
    </button>

    <div class="divider">OR</div>

    <div class="input-group">
      <input type="email" id="emailInput" placeholder="Email">
      <input type="password" id="passwordInput" placeholder="Password">
    </div>
    <button id="emailSignInBtn" class="button">Sign In</button>
    <button id="emailSignUpBtn" class="button">Sign Up</button>
    <button id="tryBtn" class="button try-btn">Try it out</button>
    <p style="text-align:center;">Don't have an account? <a href="#">Sign up</a></p>
  </div>
</div>

<!-- ========================
   CHAT APP
======================== -->
<div id="mainApp">
  <div class="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">ðŸ’¡</div>
        <div>
          <h2>BulbAI</h2>
          <div style="font-size:12px;color:#aaa;">Your yellow assistant</div>
        </div>
      </div>
      <button id="newChatBtn">+ New Chat</button>
      <div class="conversations" id="conversationsList"></div>
      <button id="themeToggle">Toggle Dark Mode</button>
    </aside>

    <main class="main">
      <div class="topbar">
        <div class="left">
          <div class="title" id="convTitle">New Chat</div>
          <div class="tiny muted" id="convSubtitle">No messages yet</div>
        </div>
      </div>
      <div id="chatWindow" class="chat-window">
        <div id="messages"></div>
      </div>
      <div class="composer">
        <input id="prompt" placeholder="Type a message..." />
        <button id="sendBtn">Send</button>
      </div>
    </main>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCGFij1pFUVNFP63QHxEq619c9jPnskzxY",
  authDomain: "bulbai-21f09.firebaseapp.com",
  projectId: "bulbai-21f09",
  storageBucket: "bulbai-21f09.firebasestorage.app",
  messagingSenderId: "366775652166",
  appId: "1:366775652166:web:22db16f4f87f9a60625f47",
  measurementId: "G-G09FQQ53XP"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const loginScreenEl = document.getElementById('loginScreen');
const mainAppEl = document.getElementById('mainApp');
const googleBtn = document.getElementById('googleSignInBtn');
const emailSignInBtn = document.getElementById('emailSignInBtn');
const emailSignUpBtn = document.getElementById('emailSignUpBtn');
const tryBtn = document.getElementById('tryBtn');
const emailInput = document.getElementById('emailInput');
const passwordInput = document.getElementById('passwordInput');

// Google Sign-In
googleBtn.onclick = () => {
  const provider = new GoogleAuthProvider();
  signInWithPopup(auth, provider)
    .then(result => {
      alert(`Welcome ${result.user.displayName}`);
      loginScreenEl.style.display='none';
      mainAppEl.style.display='flex';
    }).catch(err => alert(err.message));
};

// Email Sign-In
emailSignInBtn.onclick = () => {
  signInWithEmailAndPassword(auth,emailInput.value,passwordInput.value)
    .then(res=>{
      alert(`Welcome ${res.user.email}`);
      loginScreenEl.style.display='none';
      mainAppEl.style.display='flex';
    }).catch(err=>alert(err.message));
};

// Email Sign-Up
emailSignUpBtn.onclick = () => {
  createUserWithEmailAndPassword(auth,emailInput.value,passwordInput.value)
    .then(res=>{
      alert(`Account created: ${res.user.email}`);
      loginScreenEl.style.display='none';
      mainAppEl.style.display='flex';
    }).catch(err=>alert(err.message));
};

// Try it out
tryBtn.onclick = () => {
  loginScreenEl.style.display='none';
  mainAppEl.style.display='flex';
};

// ========================
// SIMPLE CHAT LOGIC
// ========================
const messagesEl = document.getElementById('messages');
const promptEl = document.getElementById('prompt');
const sendBtnEl = document.getElementById('sendBtn');
const convTitle = document.getElementById('convTitle');
const conversationsList = document.getElementById('conversationsList');
let conversations = [];

function createMessageElement(content,type='bot'){
  const msg = document.createElement('div');
  msg.className='msg '+type;
  msg.textContent=content;
  return msg;
}

function sendMessage(text){
  const userMsg = createMessageElement(text,'user');
  messagesEl.appendChild(userMsg);
  messagesEl.scrollTop = messagesEl.scrollHeight;

  setTimeout(()=>{
    const botMsg = createMessageElement("BulbAI: "+text.split('').reverse().join(''),'bot');
    messagesEl.appendChild(botMsg);
    messagesEl.scrollTop = messagesEl.scrollHeight;
  },800);
}

sendBtnEl.onclick = () => {
  if(promptEl.value.trim()!==''){
    sendMessage(promptEl.value);
    promptEl.value='';
  }
};

// Conversation management
const newChatBtn = document.getElementById('newChatBtn');
newChatBtn.onclick = () => {
  messagesEl.innerHTML='';
  convTitle.textContent='New Chat';
  const newTitle = 'Chat '+(conversations.length+1);
  addConversation(newTitle);
};

function addConversation(title){
  const div = document.createElement('div');
  div.textContent=title;
  div.onclick = ()=>{messagesEl.innerHTML=''; convTitle.textContent=title;};
  conversationsList.appendChild(div);
  conversations.push(title);
}

// ========================
// DARK MODE TOGGLE
// ========================
const themeToggle = document.getElementById('themeToggle');
let darkMode = true;
themeToggle.onclick = () => {
  darkMode = !darkMode;
  document.body.style.background = darkMode ? '#111' : '#f8f9fa';
  document.querySelectorAll('.main, .sidebar, .composer, .chat-window').forEach(el=>{
    el.style.background = darkMode ? '#111' : '#fff';
    el.style.color = darkMode ? '#fff' : '#1f1f1f';
  });
};
</script>
</body>
</html>
